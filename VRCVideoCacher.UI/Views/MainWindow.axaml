<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:VRCVideoCacher.UI.ViewModels"
        xmlns:views="using:VRCVideoCacher.UI.Views"
        xmlns:mi="using:Material.Icons.Avalonia"
        x:Class="VRCVideoCacher.UI.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="VRCVideoCacher"
        Icon="avares://VRCVideoCacher.UI/Assets/icon.ico"
        Width="1000" Height="700"
        MinWidth="800" MinHeight="500"
        WindowStartupLocation="CenterScreen">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="*, Auto">
        <!-- Main Content -->
        <Grid Grid.Row="0" ColumnDefinitions="200, *">
            <!-- Sidebar Navigation -->
            <Border Grid.Column="0" Background="#1a1a1a" Padding="10">
                <StackPanel Spacing="5">
                    <Image Source="avares://VRCVideoCacher.UI/Assets/SmallBanner.png"
                               Margin="0,10,0,20"
                               HorizontalAlignment="Center"/>

                    <Button Command="{Binding NavigateToDashboardCommand}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Classes="nav-button">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <mi:MaterialIcon Kind="ViewDashboard" Width="20" Height="20"/>
                            <TextBlock Text="Dashboard" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button Command="{Binding NavigateToSettingsCommand}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Classes="nav-button">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <mi:MaterialIcon Kind="Cog" Width="20" Height="20"/>
                            <TextBlock Text="Settings" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button Command="{Binding NavigateToCacheBrowserCommand}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Classes="nav-button">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <mi:MaterialIcon Kind="FolderVideo" Width="20" Height="20"/>
                            <TextBlock Text="Cache Browser" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button Command="{Binding NavigateToDownloadQueueCommand}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Classes="nav-button">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <mi:MaterialIcon Kind="Download" Width="20" Height="20"/>
                            <TextBlock Text="Downloads" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button Command="{Binding NavigateToLogViewerCommand}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Classes="nav-button">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <mi:MaterialIcon Kind="TextBox" Width="20" Height="20"/>
                            <TextBlock Text="Logs" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Border>

            <!-- Content Area -->
            <ContentControl Grid.Column="1" Content="{Binding CurrentView}" Margin="10">
                <ContentControl.DataTemplates>
                    <DataTemplate DataType="{x:Type vm:DashboardViewModel}">
                        <views:DashboardView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:SettingsViewModel}">
                        <views:SettingsView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:CacheBrowserViewModel}">
                        <views:CacheBrowserView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:DownloadQueueViewModel}">
                        <views:DownloadQueueView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type vm:LogViewerViewModel}">
                        <views:LogViewerView/>
                    </DataTemplate>
                </ContentControl.DataTemplates>
            </ContentControl>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="1" Background="#252525" Padding="10,5">
            <Grid ColumnDefinitions="*, Auto">
                <TextBlock Grid.Column="0" Text="{Binding StatusText}" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" Text="{Binding CacheStatusText}" VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>

    <Window.Styles>
        <Style Selector="Button.nav-button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Padding" Value="10"/>
        </Style>
        <Style Selector="Button.nav-button:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#333333"/>
        </Style>
    </Window.Styles>
</Window>
